{
   "format_version":"1.16.100",
   "minecraft:item":{
      "description":{
         "identifier":"true:flare_gun",
         "category":"equipment"
      },
      "components":{
         "minecraft:creative_category":{
            "parent":"itemGroup.name.equipment"
         },
         "minecraft:max_stack_size":1,
         "minecraft:use_duration":5.0,
         "minecraft:cooldown":{
            "duration":5.0,
            "category":"flare_gun"
         },
         "minecraft:icon":{
            "texture":"flare_gun"
         },
         "minecraft:display_name":{
            "value":"ยง7[Flare Gun]"
         },
         "minecraft:durability":{
            "max_durability":1
         },
         "minecraft:on_use":{
            "on_use":{
               "event":"true:shoot",
               "target":"self"
            }
         },
          "minecraft:weapon":{
            "on_hurt_entity":{
               "event":"damage",
               "target":"self"
            },
            "on_not_hurt_entity":{
               "event":"damage",
               "target":"self"
            },
            "on_hit_block":{
               "event":"damage",
               "target":"self"
            }
         },
         "minecraft:hand_equipped":true
      },
      "events":{
         "true:shoot":{
            "sequence":[
               {
                  "sequence":[
                     {
                        "condition":"query.remaining_durability>=1",
                        "sequence":[
                           {
                              "sequence":[
                                 {
                                    "damage":{
                                       "type":"durability",
                                       "amount":1,
                                       "target":"self"
                                    }
                                 },
                                 {
                                    "shoot":{
                                       "projectile":"true:flare_shell",
                                       "launch_power":3.0
                                    }
                                 },
                                 {
                                    "run_command":{
                                       "command":[
                                          "execute @p ~ ~ ~ playsound flare_shooting",
                                          "execute @p ~ ~ ~ summon true:supply_crate ^ ^ ^100"
                                       ],
                                       "target":"holder"
                                    }
                                 }
                              ]
                           }
                        ]
                     },
                     {
                        "condition":"query.remaining_durability==0",
                        "run_command":{
                           "command":[
                              "playsound gun.empty @s ~ ~ ~"
                           ],
                           "target":"holder"
                        }
                     }
                  ]
               }
            ]
         }
      }
   }
}